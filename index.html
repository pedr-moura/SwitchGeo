<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwitchGeo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="src/styles/style.css">

</head>
<body>
    <div class="app-container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="app-title">
                     SwitchGeo 
                     
                     <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16" onclick="toggleSidebar()">
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                    </svg>
                </h1>
                
                <div class="sidebar-tabs">
                    <button class="tab-button active" onclick="switchTab('map-tab', event)" title="Mapa">
                        <i class="fas fa-map"></i>
                    </button>
                    <button class="tab-button" onclick="switchTab('table-tab', event)" title="Tabela">
                        <i class="fas fa-table"></i>
                    </button>
                </div>              
                
                <input type="file" id="importFile" class="file-input" accept=".csv" onchange="importData(event)">
            </div>

            <div class="sidebar-content">
                <div id="map-tab" class="tab-content active">

                    <div class="shortcuts">
  <h3>Shortcuts</h3>
  <ul>
    <li><kbd>Ctrl</kbd> + <kbd>A</kbd> → <i class="fas fa-plus btn-primary"></i></li>
    <li><kbd>Ctrl</kbd> + <kbd>D</kbd> → <i class="fas fa-minus btn-danger"></i></li>
    <li><kbd>Ctrl</kbd> + <kbd>C</kbd> → <i class="fas fa-link btn-warning"></i></li>
    <li><kbd>Ctrl</kbd> + <kbd>X</kbd> →  <i class="fas fa-unlink btn-danger"></i></i></li>
    <li><kbd>Ctrl</kbd> + <kbd>S</kbd> → <i class="fas fa-download btn-success"></i></li>
    <li><kbd>Ctrl</kbd> + <kbd>M</kbd> → <i style="border: 2px solid var(--glass-border)" class="fas fa-globe "></i> </li>
  </ul>
</div>
                    <div class="stats-grid">

                        <div class="stat-card">
                            <div class="stat-number" id="point-count">0</div>
                            <div class="stat-label">Pontos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="connection-count">0</div>
                            <div class="stat-label">Conexões</div>
                        </div>
                    </div>

                    <div class="form-section" style="display: none;">
                        <div class="form-title">
                            <i class="fas fa-map-pin"></i>
                            Novo Ponto
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">Nome</label>
                            <input type="text" class="input-field" id="pointName" placeholder="Nome do ponto...">
                        </div>

                        <div class="input-group">
                            <label class="input-label">Descrição</label>
                            <textarea class="textarea-field" id="pointDesc" rows="3" placeholder="Detalhes..."></textarea>
                        </div>
                    </div>

                    <div class="selection-controls" id="selectionControls" style="display: none;">
                        <div class="selection-header">
                            <div class="selection-count" id="selectionCount">0 selecionados</div>
                            <div class="selection-actions">
                                <button class="selection-btn btn-clear" onclick="clearSelection()" title="Limpar">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-section" style="display: none;">
                        <div class="form-title">
                            <i class="fas fa-list"></i>
                            Pontos
                        </div>
                        <div class="point-list" id="pointList">
                            <div class="empty-state">
                                <i class="fas fa-map-pin"></i>
                                <h3>Nenhum ponto</h3>
                                <p>Adicione pontos no mapa</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="table-tab" class="tab-content">
                    <div class="filter-table">
                        <i class="fas fa-search"></i>
                        <input type="text" id="tableFilter" placeholder="Filtrar por nome, descrição, lat ou lng...">
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="pointTable">
                            <thead>
                                <tr>
                                    <th><i class="fas fa-tag"></i> </th>
                                    <th><i class="fas fa-info-circle"></i> </th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <tr>
                                    <td colspan="4">
                                        <div class="empty-state">
                                            <i class="fas fa-table"></i>
                                            <h3>Nenhum dado</h3>
                                            <p>Adicione pontos</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="data-actions">
                    <label class="action-btn btn-success btn-data" for="importFile" title="Importar">
                        <i class="fas fa-upload"> </i><span>Import</span>
                    </label>

                    <button class="action-btn btn-success btn-data"  onclick="exportData()" title="Exportar">
                        <i class="fas fa-download"> </i><span>Export</span>
                    </button>
            </div>
        </div>

        <div class="main-content">
            <div id="map"></div>

            <div class="grid-container">
                            <div class="action-grid hide-action-grid" id="grid-action">
                                    <button class="action-btn btn-primary"  onclick="toggleAddMode()" title="Adicionar">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    <!-- <button class="action-btn btn-warning"  onclick="toggleConnectMode()" title="Conectar">
                                        <i class="fas fa-link"></i>
                                    </button> -->
                                    <button class="action-btn btn-danger"  onclick="toggleRemoveMode()" title="Remover">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <!-- <button class="action-btn btn-danger"  onclick="toggleDisconnectMode()" title="Desconectar">
                                        <i class="fas fa-unlink"></i>
                                    </button> -->

                                    <button class="action-btn btn-primary" id="draw-rectangle-btn" title="Desenhar Retângulo" onclick="toggleColorPalette()">
                                        <i class="fas fa-vector-square"></i>
                                    </button>

                                    <div id="color-palette-container" class="color-palette-container hidden">
                                        <div class="color-palette">
                                            <button class="color-box" style="background-color: #ff7800;" onclick="setCurrentColor('#ff7800')"></button>
                                            <button class="color-box" style="background-color: #ff0000;" onclick="setCurrentColor('#ff0000')"></button>
                                            <button class="color-box" style="background-color: #00ff00;" onclick="setCurrentColor('#00ff00')"></button>
                                            <button class="color-box" style="background-color: #0000ff;" onclick="setCurrentColor('#0000ff')"></button>
                                        </div>
                                    </div>

                            </div>

                            <div class="map-button liquid-glass">

                                <div class="map-button-command">

                                    <button class="layer-toggle-btn" id="layerToggleBtn" title="Alternar Mapa">
                                        <i class="fas fa-globe"></i> 
                                        <!-- <span>Satélite</span> -->
                                    </button>

                                    <div class="mode-indicator" id="modeIndicator" onclick="controller.view.toggleClassesFromIdExact('grid-action', 'hide-action-grid', 'show-action-grid');">
                                        <i class="fas fa-cube"></i>
                                    </div>
                                    
                                    <button class="layer-toggle-btn" id="gpsBtn" class="btn">
                                        <i class="fas fa-location-crosshairs"></i> 
                                        <!-- Rastrear GPS -->
                                    </button>

                                </div>

                                                        
                                <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleSidebar()">
                                    <i class="fas fa-bars"></i>
                                </button>

                            </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script type="module" src="./src/main.js"></script>

</body>
</html>